{"ast":null,"code":"/*!\n * serve-static\n * Copyright(c) 2010 Sencha Inc.\n * Copyright(c) 2011 TJ Holowaychuk\n * Copyright(c) 2014-2016 Douglas Christopher Wilson\n * MIT Licensed\n */'use strict';/**\n * Module dependencies.\n * @private\n */var encodeUrl=require('encodeurl');var escapeHtml=require('escape-html');var parseUrl=require('parseurl');var resolve=require('path').resolve;var send=require('send');var url=require('url');/**\n * Module exports.\n * @public\n */module.exports=serveStatic;module.exports.mime=send.mime;/**\n * @param {string} root\n * @param {object} [options]\n * @return {function}\n * @public\n */function serveStatic(root,options){if(!root){throw new TypeError('root path required');}if(typeof root!=='string'){throw new TypeError('root path must be a string');}// copy options object\nvar opts=Object.create(options||null);// fall-though\nvar fallthrough=opts.fallthrough!==false;// default redirect\nvar redirect=opts.redirect!==false;// headers listener\nvar setHeaders=opts.setHeaders;if(setHeaders&&typeof setHeaders!=='function'){throw new TypeError('option setHeaders must be function');}// setup options for send\nopts.maxage=opts.maxage||opts.maxAge||0;opts.root=resolve(root);// construct directory listener\nvar onDirectory=redirect?createRedirectDirectoryListener():createNotFoundDirectoryListener();return function serveStatic(req,res,next){if(req.method!=='GET'&&req.method!=='HEAD'){if(fallthrough){return next();}// method not allowed\nres.statusCode=405;res.setHeader('Allow','GET, HEAD');res.setHeader('Content-Length','0');res.end();return;}var forwardError=!fallthrough;var originalUrl=parseUrl.original(req);var path=parseUrl(req).pathname;// make sure redirect occurs at mount\nif(path==='/'&&originalUrl.pathname.substr(-1)!=='/'){path='';}// create send stream\nvar stream=send(req,path,opts);// add directory handler\nstream.on('directory',onDirectory);// add headers listener\nif(setHeaders){stream.on('headers',setHeaders);}// add file listener for fallthrough\nif(fallthrough){stream.on('file',function onFile(){// once file is determined, always forward error\nforwardError=true;});}// forward errors\nstream.on('error',function error(err){if(forwardError||!(err.statusCode<500)){next(err);return;}next();});// pipe\nstream.pipe(res);};}/**\n * Collapse all leading slashes into a single slash\n * @private\n */function collapseLeadingSlashes(str){for(var i=0;i<str.length;i++){if(str.charCodeAt(i)!==0x2f/* / */){break;}}return i>1?'/'+str.substr(i):str;}/**\n * Create a minimal HTML document.\n *\n * @param {string} title\n * @param {string} body\n * @private\n */function createHtmlDocument(title,body){return'<!DOCTYPE html>\\n'+'<html lang=\"en\">\\n'+'<head>\\n'+'<meta charset=\"utf-8\">\\n'+'<title>'+title+'</title>\\n'+'</head>\\n'+'<body>\\n'+'<pre>'+body+'</pre>\\n'+'</body>\\n'+'</html>\\n';}/**\n * Create a directory listener that just 404s.\n * @private\n */function createNotFoundDirectoryListener(){return function notFound(){this.error(404);};}/**\n * Create a directory listener that performs a redirect.\n * @private\n */function createRedirectDirectoryListener(){return function redirect(res){if(this.hasTrailingSlash()){this.error(404);return;}// get original URL\nvar originalUrl=parseUrl.original(this.req);// append trailing slash\noriginalUrl.path=null;originalUrl.pathname=collapseLeadingSlashes(originalUrl.pathname+'/');// reformat the URL\nvar loc=encodeUrl(url.format(originalUrl));var doc=createHtmlDocument('Redirecting','Redirecting to <a href=\"'+escapeHtml(loc)+'\">'+escapeHtml(loc)+'</a>');// send redirect response\nres.statusCode=301;res.setHeader('Content-Type','text/html; charset=UTF-8');res.setHeader('Content-Length',Buffer.byteLength(doc));res.setHeader('Content-Security-Policy',\"default-src 'none'\");res.setHeader('X-Content-Type-Options','nosniff');res.setHeader('Location',loc);res.end(doc);};}","map":{"version":3,"names":["encodeUrl","require","escapeHtml","parseUrl","resolve","send","url","module","exports","serveStatic","mime","root","options","TypeError","opts","Object","create","fallthrough","redirect","setHeaders","maxage","maxAge","onDirectory","createRedirectDirectoryListener","createNotFoundDirectoryListener","req","res","next","method","statusCode","setHeader","end","forwardError","originalUrl","original","path","pathname","substr","stream","on","onFile","error","err","pipe","collapseLeadingSlashes","str","i","length","charCodeAt","createHtmlDocument","title","body","notFound","hasTrailingSlash","loc","format","doc","Buffer","byteLength"],"sources":["C:/Users/Autor/Desktop/LaRuinaTV/api/src/node_modules/serve-static/index.js"],"sourcesContent":["/*!\n * serve-static\n * Copyright(c) 2010 Sencha Inc.\n * Copyright(c) 2011 TJ Holowaychuk\n * Copyright(c) 2014-2016 Douglas Christopher Wilson\n * MIT Licensed\n */\n\n'use strict'\n\n/**\n * Module dependencies.\n * @private\n */\n\nvar encodeUrl = require('encodeurl')\nvar escapeHtml = require('escape-html')\nvar parseUrl = require('parseurl')\nvar resolve = require('path').resolve\nvar send = require('send')\nvar url = require('url')\n\n/**\n * Module exports.\n * @public\n */\n\nmodule.exports = serveStatic\nmodule.exports.mime = send.mime\n\n/**\n * @param {string} root\n * @param {object} [options]\n * @return {function}\n * @public\n */\n\nfunction serveStatic (root, options) {\n  if (!root) {\n    throw new TypeError('root path required')\n  }\n\n  if (typeof root !== 'string') {\n    throw new TypeError('root path must be a string')\n  }\n\n  // copy options object\n  var opts = Object.create(options || null)\n\n  // fall-though\n  var fallthrough = opts.fallthrough !== false\n\n  // default redirect\n  var redirect = opts.redirect !== false\n\n  // headers listener\n  var setHeaders = opts.setHeaders\n\n  if (setHeaders && typeof setHeaders !== 'function') {\n    throw new TypeError('option setHeaders must be function')\n  }\n\n  // setup options for send\n  opts.maxage = opts.maxage || opts.maxAge || 0\n  opts.root = resolve(root)\n\n  // construct directory listener\n  var onDirectory = redirect\n    ? createRedirectDirectoryListener()\n    : createNotFoundDirectoryListener()\n\n  return function serveStatic (req, res, next) {\n    if (req.method !== 'GET' && req.method !== 'HEAD') {\n      if (fallthrough) {\n        return next()\n      }\n\n      // method not allowed\n      res.statusCode = 405\n      res.setHeader('Allow', 'GET, HEAD')\n      res.setHeader('Content-Length', '0')\n      res.end()\n      return\n    }\n\n    var forwardError = !fallthrough\n    var originalUrl = parseUrl.original(req)\n    var path = parseUrl(req).pathname\n\n    // make sure redirect occurs at mount\n    if (path === '/' && originalUrl.pathname.substr(-1) !== '/') {\n      path = ''\n    }\n\n    // create send stream\n    var stream = send(req, path, opts)\n\n    // add directory handler\n    stream.on('directory', onDirectory)\n\n    // add headers listener\n    if (setHeaders) {\n      stream.on('headers', setHeaders)\n    }\n\n    // add file listener for fallthrough\n    if (fallthrough) {\n      stream.on('file', function onFile () {\n        // once file is determined, always forward error\n        forwardError = true\n      })\n    }\n\n    // forward errors\n    stream.on('error', function error (err) {\n      if (forwardError || !(err.statusCode < 500)) {\n        next(err)\n        return\n      }\n\n      next()\n    })\n\n    // pipe\n    stream.pipe(res)\n  }\n}\n\n/**\n * Collapse all leading slashes into a single slash\n * @private\n */\nfunction collapseLeadingSlashes (str) {\n  for (var i = 0; i < str.length; i++) {\n    if (str.charCodeAt(i) !== 0x2f /* / */) {\n      break\n    }\n  }\n\n  return i > 1\n    ? '/' + str.substr(i)\n    : str\n}\n\n/**\n * Create a minimal HTML document.\n *\n * @param {string} title\n * @param {string} body\n * @private\n */\n\nfunction createHtmlDocument (title, body) {\n  return '<!DOCTYPE html>\\n' +\n    '<html lang=\"en\">\\n' +\n    '<head>\\n' +\n    '<meta charset=\"utf-8\">\\n' +\n    '<title>' + title + '</title>\\n' +\n    '</head>\\n' +\n    '<body>\\n' +\n    '<pre>' + body + '</pre>\\n' +\n    '</body>\\n' +\n    '</html>\\n'\n}\n\n/**\n * Create a directory listener that just 404s.\n * @private\n */\n\nfunction createNotFoundDirectoryListener () {\n  return function notFound () {\n    this.error(404)\n  }\n}\n\n/**\n * Create a directory listener that performs a redirect.\n * @private\n */\n\nfunction createRedirectDirectoryListener () {\n  return function redirect (res) {\n    if (this.hasTrailingSlash()) {\n      this.error(404)\n      return\n    }\n\n    // get original URL\n    var originalUrl = parseUrl.original(this.req)\n\n    // append trailing slash\n    originalUrl.path = null\n    originalUrl.pathname = collapseLeadingSlashes(originalUrl.pathname + '/')\n\n    // reformat the URL\n    var loc = encodeUrl(url.format(originalUrl))\n    var doc = createHtmlDocument('Redirecting', 'Redirecting to <a href=\"' + escapeHtml(loc) + '\">' +\n      escapeHtml(loc) + '</a>')\n\n    // send redirect response\n    res.statusCode = 301\n    res.setHeader('Content-Type', 'text/html; charset=UTF-8')\n    res.setHeader('Content-Length', Buffer.byteLength(doc))\n    res.setHeader('Content-Security-Policy', \"default-src 'none'\")\n    res.setHeader('X-Content-Type-Options', 'nosniff')\n    res.setHeader('Location', loc)\n    res.end(doc)\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}