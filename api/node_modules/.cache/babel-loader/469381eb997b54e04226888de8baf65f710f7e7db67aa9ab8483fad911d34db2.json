{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Autor/Desktop/LaRuinaTV/api/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Autor/Desktop/LaRuinaTV/api/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";require('dotenv').config();var _process$env=process.env,CLIENT_ID=_process$env.CLIENT_ID,CLIENT_SECRET=_process$env.CLIENT_SECRET,REDIRECT_URI=_process$env.REDIRECT_URI,REFRESH_TOKEN=_process$env.REFRESH_TOKEN,ACCESS_TOKEN=_process$env.ACCESS_TOKEN,API_KEY=_process$env.API_KEY;var _require=require('googleapis'),google=_require.google;var oauth2Client=new google.auth.OAuth2(CLIENT_ID,CLIENT_SECRET,REDIRECT_URI,ACCESS_TOKEN);oauth2Client.setCredentials({refresh_token:REFRESH_TOKEN});var drive=google.drive({version:'v3',auth:oauth2Client});function getFolderFiles(_x){return _getFolderFiles.apply(this,arguments);}function _getFolderFiles(){_getFolderFiles=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(idFolder){var query,res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:query=\"'\"+idFolder+\"' in parents\";_context.prev=1;_context.next=4;return drive.files.list({q:query,fields:'files(id, name)'});case 4:res=_context.sent;return _context.abrupt(\"return\",res.data.files);case 8:_context.prev=8;_context.t0=_context[\"catch\"](1);console.log(_context.t0.message);case 11:case\"end\":return _context.stop();}},_callee,null,[[1,8]]);}));return _getFolderFiles.apply(this,arguments);}function getUrlFileById(_x2){return _getUrlFileById.apply(this,arguments);}function _getUrlFileById(){_getUrlFileById=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(id){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:return _context2.abrupt(\"return\",\"https://www.googleapis.com/drive/v3/files/\".concat(id,\"?supportsAllDrives=true&key=\").concat(API_KEY,\"&alt=media\"));case 1:case\"end\":return _context2.stop();}},_callee2);}));return _getUrlFileById.apply(this,arguments);}module.exports={getFolderFiles:getFolderFiles,getUrlFileById:getUrlFileById};","map":{"version":3,"names":["require","config","process","env","CLIENT_ID","CLIENT_SECRET","REDIRECT_URI","REFRESH_TOKEN","ACCESS_TOKEN","API_KEY","google","oauth2Client","auth","OAuth2","setCredentials","refresh_token","drive","version","getFolderFiles","idFolder","query","files","list","q","fields","res","data","console","log","message","getUrlFileById","id","module","exports"],"sources":["C:/Users/Autor/Desktop/LaRuinaTV/api/src/Functions/googleapis/index.js"],"sourcesContent":["require('dotenv').config();\r\nconst { CLIENT_ID, CLIENT_SECRET, REDIRECT_URI, REFRESH_TOKEN, ACCESS_TOKEN, API_KEY } = process.env;\r\nconst { google } = require('googleapis');\r\n\r\nconst oauth2Client = new google.auth.OAuth2(\r\n  CLIENT_ID,\r\n  CLIENT_SECRET,\r\n  REDIRECT_URI,\r\n  ACCESS_TOKEN\r\n)\r\n\r\noauth2Client.setCredentials({refresh_token: REFRESH_TOKEN})\r\n\r\nconst drive = google.drive({\r\n  version: 'v3',\r\n  auth: oauth2Client\r\n})\r\n\r\nasync function getFolderFiles(idFolder){\r\n  var query = \"'\" + idFolder + \"' in parents\"\r\n  try {\r\n    const res = await drive.files.list(\r\n      {\r\n        q: query,\r\n        fields: 'files(id, name)',\r\n      });\r\n    return res.data.files;\r\n    \r\n  } catch (error) {\r\n    console.log(error.message)\r\n  }\r\n}\r\n\r\nasync function getUrlFileById(id){\r\n  return `https://www.googleapis.com/drive/v3/files/${id}?supportsAllDrives=true&key=${API_KEY}&alt=media`\r\n}\r\n\r\n\r\nmodule.exports = {\r\n  getFolderFiles,\r\n  getUrlFileById\r\n}"],"mappings":"oQAAAA,OAAO,CAAC,QAAQ,CAAC,CAACC,MAAM,EAAE,CAC1B,iBAAyFC,OAAO,CAACC,GAAG,CAA5FC,SAAS,cAATA,SAAS,CAAEC,aAAa,cAAbA,aAAa,CAAEC,YAAY,cAAZA,YAAY,CAAEC,aAAa,cAAbA,aAAa,CAAEC,YAAY,cAAZA,YAAY,CAAEC,OAAO,cAAPA,OAAO,CACpF,aAAmBT,OAAO,CAAC,YAAY,CAAC,CAAhCU,MAAM,UAANA,MAAM,CAEd,GAAMC,aAAY,CAAG,GAAID,OAAM,CAACE,IAAI,CAACC,MAAM,CACzCT,SAAS,CACTC,aAAa,CACbC,YAAY,CACZE,YAAY,CACb,CAEDG,YAAY,CAACG,cAAc,CAAC,CAACC,aAAa,CAAER,aAAa,CAAC,CAAC,CAE3D,GAAMS,MAAK,CAAGN,MAAM,CAACM,KAAK,CAAC,CACzBC,OAAO,CAAE,IAAI,CACbL,IAAI,CAAED,YACR,CAAC,CAAC,SAEaO,eAAc,wJAA7B,iBAA8BC,QAAQ,iIAChCC,KAAK,CAAG,GAAG,CAAGD,QAAQ,CAAG,cAAc,uCAEvBH,MAAK,CAACK,KAAK,CAACC,IAAI,CAChC,CACEC,CAAC,CAAEH,KAAK,CACRI,MAAM,CAAE,iBACV,CAAC,CAAC,QAJEC,GAAG,+CAKFA,GAAG,CAACC,IAAI,CAACL,KAAK,0DAGrBM,OAAO,CAACC,GAAG,CAAC,YAAMC,OAAO,CAAC,oEAE7B,yDAEcC,eAAc,yJAA7B,kBAA8BC,EAAE,4MACsBA,EAAE,wCAA+BtB,OAAO,uEAC7F,iDAGDuB,MAAM,CAACC,OAAO,CAAG,CACff,cAAc,CAAdA,cAAc,CACdY,cAAc,CAAdA,cACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}